<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>ThÃªm sáº£n pháº©m - Supabase</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    body { font-family: Arial; background: #f9f9f9; padding: 30px; }
    form { background: white; padding: 20px; border-radius: 10px; width: 400px; margin: auto; box-shadow: 0 0 10px #ccc; }
    input, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
    label { font-weight: bold; }
    button { background: #007bff; color: white; border: none; padding: 10px; border-radius: 5px; width: 100%; }
    .error { color: red; font-size: 0.9em; }
  </style>
</head>
<body>

  <h2>ğŸ›’ ThÃªm sáº£n pháº©m</h2>
  <form id="productForm">
    <label>TÃªn sáº£n pháº©m:</label>
    <input type="text" id="name">
    <div id="nameError" class="error"></div>

    <label>GiÃ¡ (VNÄ):</label>
    <input type="number" id="price">
    <div id="priceError" class="error"></div>

    <label>áº¢nh (URL):</label>
    <input type="text" id="image">
    <div id="imageError" class="error"></div>

    <label>MÃ´ táº£:</label>
    <textarea id="description"></textarea>
    <div id="descError" class="error"></div>

    <label>ÄÃ¡nh giÃ¡ (1-5):</label>
    <input type="number" id="rating" min="1" max="5">
    <div id="ratingError" class="error"></div>

    <button type="submit">ThÃªm sáº£n pháº©m</button>
  </form>

  <script>
    // Thay báº±ng thÃ´ng tin dá»± Ã¡n cá»§a báº¡n
    const SUPABASE_URL = "https://YOUR_PROJECT_URL.supabase.co";
    const SUPABASE_ANON_KEY = "YOUR_ANON_KEY";

    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('productForm');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const price = document.getElementById('price').value.trim();
      const image = document.getElementById('image').value.trim();
      const description = document.getElementById('description').value.trim();
      const rating = document.getElementById('rating').value.trim();

      // Reset lá»—i
      document.querySelectorAll('.error').forEach(el => el.textContent = '');

      // Validation
      let valid = true;
      if (!name) { document.getElementById("nameError").textContent = "Vui lÃ²ng nháº­p tÃªn sáº£n pháº©m."; valid = false; }
      if (!price || price <= 0) { document.getElementById("priceError").textContent = "GiÃ¡ pháº£i lá»›n hÆ¡n 0."; valid = false; }
      if (!image || !image.startsWith("http")) { document.getElementById("imageError").textContent = "URL áº£nh khÃ´ng há»£p lá»‡."; valid = false; }
      if (!description) { document.getElementById("descError").textContent = "Vui lÃ²ng nháº­p mÃ´ táº£."; valid = false; }
      if (!rating || rating < 1 || rating > 5) { document.getElementById("ratingError").textContent = "ÄÃ¡nh giÃ¡ pháº£i tá»« 1 Ä‘áº¿n 5."; valid = false; }

      if (!valid) return;

      // LÆ°u vÃ o Supabase
      const { data, error } = await supabase
        .from('products')
        .insert([{ name, price, image, description, rating }]);

      if (error) {
        alert("âŒ Lá»—i khi thÃªm sáº£n pháº©m: " + error.message);
      } else {
        alert("âœ… ThÃªm sáº£n pháº©m thÃ nh cÃ´ng!");
        form.reset();
      }
    });
  </script>
</body>
</html>
